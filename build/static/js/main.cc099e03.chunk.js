(this["webpackJsonpreact-comments"]=this["webpackJsonpreact-comments"]||[]).push([[0],{57:function(e,t,n){},61:function(e,t,n){"use strict";n.r(t);var i=n(8),a=n(0),c=n.n(a),o=n(9),s=n.n(o),r=(n(57),n(33)),m=n(107),d=n(106),l=n(108),u=n(95),h=n(97),j=n(101),f=n(99),b=n(100),v=n(102),O=n(103),x=n(104),g=n(105),p=Object(u.a)({root:{minWidth:275,marginBottom:10},actions:{display:"flex"},delete:{}});function y(e){var t,n=p(),a=e.comment,c=e.myName;return Object(i.jsxs)(h.a,{className:n.root,variant:"outlined",children:[Object(i.jsxs)(f.a,{children:[Object(i.jsx)(b.a,{variant:"body2",component:"p",children:a.text}),Object(i.jsx)(b.a,{variant:"subtitle2",color:"textSecondary",display:"inline",children:a.name}),"\xa0",Object(i.jsx)(b.a,{variant:"caption",color:"textSecondary",display:"inline",children:(t=a.date,new Date(t).toLocaleString())})]}),Object(i.jsxs)(j.a,{className:n.actions,children:[Object(i.jsx)(v.a,{"aria-label":"down",onClick:function(){return e.addReaction(a.id,"down")},disabled:!c||a.name===c,children:Object(i.jsx)(O.a,{color:a.reactions.down.includes(c)?"primary":"inherit"})}),"\xa0(",a.reactions.down.length,")",Object(i.jsx)(v.a,{"aria-label":"up",onClick:function(){return e.addReaction(a.id,"up")},disabled:!c||a.name===c,children:Object(i.jsx)(x.a,{color:a.reactions.up.includes(c)?"primary":"inherit"})}),"\xa0(",a.reactions.up.length,")",a.name===c&&Object(i.jsx)(v.a,{"aria-label":"delete",className:n.delete,onClick:function(){return e.deleteComment(a.id)},children:Object(i.jsx)(g.a,{})})]})]})}var C=n(37),w=n(38),k=new(function(){function e(){var t=this;Object(C.a)(this,e),this.downloadComments=function(){t._comments=JSON.parse(t.storage.getItem(t.commentsItem)||"[]")},this._comments=[],this.reactions=["up","down"],this.commentsItem="comments",this.storage=window.localStorage,this.downloadComments()}return Object(w.a)(e,[{key:"addNewComment",value:function(e,t){return this._comments.push({name:e,text:t,date:Date.now(),id:1e3+this.comments.length,reactions:{up:[],down:[]}}),this.save(),this.comments}},{key:"deleteComment",value:function(e){return this.getComment(e).deleted=!0,this.save(),this.comments}},{key:"addReaction",value:function(e,t,n){if(!this.reactions.includes(t))return!1;var i=this.getComment(e);if(!i.reactions[t].includes(n)){i.reactions[t].push(n);var a="up"===t?"down":"up";this.removeReaction(e,a,n),this.save()}return this.comments}},{key:"removeReaction",value:function(e,t,n){if(!this.reactions.includes(t))return!1;var i=this.getComment(e),a=i.reactions[t].findIndex((function(e){return e===n}));return a>-1&&(i.reactions[t].splice(a,1),this.save()),this.comments}},{key:"save",value:function(){this.storage.setItem(this.commentsItem,JSON.stringify(this.comments))}},{key:"getComment",value:function(e){return this._comments.find((function(t){return t.id===e}))}},{key:"comments",get:function(){return this._comments.filter((function(e){return!e.deleted})).sort((function(e,t){return t.date-e.date}))}}]),e}());function S(e){var t=c.a.useState(k.comments),n=Object(r.a)(t,2),a=n[0],o=n[1],s=c.a.useState(""),u=Object(r.a)(s,2),h=u[0],j=u[1],f=c.a.useState(""),b=Object(r.a)(f,2),v=b[0],O=b[1],x=function(e){if(a.find((function(t){return t.id===e})).name!==v)return!1;var t=k.deleteComment(e);o(t)},g=function(e,t){var n=k.addReaction(e,t,v);o(n)};return Object(i.jsxs)(c.a.Fragment,{children:[Object(i.jsx)(l.a,{my:3,children:a.map((function(e,t){return Object(i.jsx)(y,{comment:e,deleteComment:x,addReaction:g,myName:v},"comment_".concat(t))}))}),Object(i.jsx)(l.a,{my:3,children:Object(i.jsx)(m.a,{label:"\u0412\u0430\u0448\u0435 \u0438\u043c\u044f",variant:"outlined",value:v,onChange:function(e){return O(e.target.value)}})}),Object(i.jsx)(l.a,{my:3,children:Object(i.jsx)(m.a,{label:"\u0412\u0430\u0448 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439",multiline:!0,fullWidth:!0,variant:"outlined",value:h,onChange:function(e){return j(e.target.value)}})}),Object(i.jsx)(l.a,{display:"flex",justifyContent:"center",my:3,children:Object(i.jsx)(d.a,{variant:"outlined",onClick:function(){var e=k.addNewComment(v,h.replace(/(<([^>]+)>)/gm,""));o(e),j("")},disabled:!v||!h,children:"\u041e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u0442\u044c"})})]})}var N=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,111)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),i(e),a(e),c(e),o(e)}))};s.a.render(Object(i.jsx)(c.a.StrictMode,{children:Object(i.jsx)(S,{})}),document.getElementById("root")),N()}},[[61,1,2]]]);
//# sourceMappingURL=main.cc099e03.chunk.js.map